@{
    ViewData["Title"] = "Home Page";
}


<head>
    <title>खर्च निकासा फाराम</title>
    <link href="~/css/default-main.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="~/js/kendo.all.min.js"></script>
    <script src="~/js/kendo-ui-license.js"></script>
</head>
<body>

    <form>
        <div class="headers">

            <h1>संघ/ प्रदेश / स्थानीय तह </h1>


            <!-- HEADER SECTION OF THE FORM -->
            <div class="d-flex justify-content-center form-container">

                <!-- Center the form -->
                <div class="container">
                    <div class="row justify-content-center">
                        <!-- Center the content within the row -->
                        <div class="col-sm-2">
                            <!-- Adjust the column width as needed -->
                            <div class="form-group">
                                <label for="mantralaya" class="text-right"><b>मन्त्रालय / विभाग / कार्यालय:</b></label>
                                <input type="text" class="form-control" id="mantralaya">
                            </div>
                        </div>
                    </div>

                    <div class="row justify-content-center">
                        <!-- Add another row -->
                        <div class="col-sm-2">
                            <!-- Adjust the column width as needed -->
                            <div class="form-group">
                                <label for="karlaya" class="text-right"><b>कार्यालय कोड नं:</b></label>
                                <input type="text" class="form-control" id="karlaya">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Second Line of Input -->

        <div class="Container mt-5">
            <h1>खर्च निकासा फाराम</h1>

            <div class="row">
                <div class="col-sm">

                    <div>
                        <label><b>आर्थिक वर्ष :</b></label>
                        <input id="Arthik_barsa" />
                    </div>
                </div>

                <div class="col-sm">
                    <div>
                        <label><b>खर्च निकासा फाराम नं:</b></label>
                        <input id="Kharcha_Nikasa_No" />
                    </div>
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col-sm">
                    <div>
                        <label><b>खर्च निकासा गरिएका माग फाराम नं.:</b></label>
                        <input id="Kharcha_form_number" />
                    </div>
                </div>
                <div class="col-sm">
                    <div>
                        <label><b>मितिः</b></label>
                        <input id="datetimepicker" />
                    </div>
                </div>
            </div>
        </div>


        <br>

        <div class="modules mt-5">
            <div id="sub_main_info">
                @* SUB INFORMATIONS *@
                <div class="container" id="sub_info">
                    <hr>
                    <table class="table">

                        <thead>
                            <tr>
                                <th rowspan="2">क्र.सं.</th>
                                <th colspan="6">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;खर्च भएर जाने जिन्सी मालसामानको निकासा गरिएको</th>
                                <th rowspan="2">कैफियत</th>
                                <th rowspan="2">जम्मा रकम</th>

                            </tr>
                            <tr>
                                <thth>
                                    <th>नाम</th>
                                    <th>सङ्केत नम्बर</th>
                                    <th>स्पेसिफिकेसन</th>
                                    <th>एकाइ</th>
                                    <th>परिमाण</th>
                                    <th>दर</th>




                                    <tr>
                                        <th>१</th>
                                        <th>२</th>
                                        <th>३</th>
                                        <th>४</th>
                                        <th>५</th>
                                        <th>६</th>
                                        <th>७</th>
                                        <th>८=६x७</th>
                                        <th>९</th>




                                    </tr>

                            </tr>
                        </thead>

                        <tbody>
                            <tr>
                                <td><input type="text" id="sn" name="sn[]" class="sn"></td>
                                <td><input type="text" id="name" name="name[]" class="name"></td>
                                <td><input type="text" id="symbol_no" name="symbol_no[]" class="symbol_no"></td>
                                <td><input type="text" id="specification_no" name="specification_no[]" class="specification_no"></td>

                                <td><input type="text" id="akin_no" name="akin_no[]" class="aking_no"></td>
                                <td><input type="text" id="quantity" name="quantity[]" class="quantity multiply"></td>
                                <td><input type="text" id="rate" name="rate[]" class="rate multiply"></td>
                                <td><input type="text" id="Total" name="Total[]" class="Total multiply"></td>

                                <!-- Add a class "result" to the cell where the result should be displayed -->

                                <td><textarea id="remarks" name="remarks[]" class="remarks"></textarea></td>

                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Grand Total:</td>
                                <td id="grandTotal">0.00</td>
                            </tr>
                        </tfoot>
                    </table>
                    <hr>
                </div>
            </div>
        </div>
        <p><b><u>उद्देश्य:</u></b></p>
        <p>माग भर्इ आएको जिन्सी मालसामानको खर्च निकासाका लागि यो फाराम भर्नुपर्दछ ।</p>
        <p><b><u>फाराम भर्ने तरिकाः</u></b></p>

        <ol>
            <li>माग भर्इ आएको जिन्सी मालसामानको खर्च निकासाका लागि यो फाराम भर्नुपर्दछ । 							</li>
            <li>आर्थिक वर्षमा चालु आर्थिक वर्ष लेख्नुपर्छ ।							</li>
            <li>खर्च निकासा फाराम नं.मा प्रत्येक आर्थिक वर्षको लागि खर्च निकासा फाराम नं. १ बाट शुरू गरी सिलसिलेबार नम्बर लेख्नुपर्दछ ।							</li>
            <li>मितिमा खर्च निकासा फाराम नं. उठाइएको दिनको मिति लेख्नुपर्छ ।							</li>
            <li>स्वीकृत माग फारामबाट दिइएको जिन्सी मालसामानको एकमुष्ट खर्च लेखिने हुँदा खर्च निकासा गरिएका माग फाराम नं.मा खर्च लेखिने उक्त माग फारामहरुको नम्बर लेख्नुपर्दछ ।							</li>
            <li>महल १ मा सिलसिलेबार हुने गरी क्रम सङ्ख्या नं. लेख्नुपर्छ ।							</li>
            <li>महल २ मा खर्च निकासा गरिएको जिन्सी मालसामानको नाम लेख्नुपर्छ  ।							</li>
            <li>महल ३ मा जिन्सी मालसामानको सङ्केत नं लेख्नुपर्छ । 							</li>
            <li>महल ४ मा जिन्सी मालसामानको स्पेसिफिकेसन लेख्नुपर्छ । जस्तैः फोटोकपि पेपर भए साइज, ग्राम, रङ्ग आदि ।							</li>
            <li>महल ५ मा खर्च निकासा गरिएको जिन्सी मालसामानको एकाइ लेख्नुपर्छ। एकाइ भन्नाले किलो, वटा, बोरा, दर्जन, आदि । 							</li>
            <li>महल ६ मा जिन्सी मालसामानको परिमाण लेख्नुपर्दछ ।							</li>
            <li>महल ७ मा जिन्सी मालसामानको प्रति एकाई (मू.अ.कर र अन्य खर्च सहित) दर लेख्नुपर्दछ ।							</li>
            <li>महल ८ मा परिमाण र दरले गुणान गर्दा आउने रकम लेख्नुपर्छ ।							</li>
            <li>महल ९ मा कुनै कैफियत भए सो कैफियत लेख्नुपर्छ ।							</li>
            <li>खर्च निकासा फाराम तयार गर्नेको दस्तखत, नाम, पद र मिति लेख्नुपर्छ ।							</li>
            <li>खर्च निकासा फाराम सिफारिस गर्नेको दस्तखत, नाम, पद र मिति लेख्नुपर्छ ।							</li>
            <li>खर्च निकासा फाराम स्वीकृत गर्नेको दस्तखत, नाम, पद र मिति लेख्नुपर्छ ।							</li>



        </ol>


        <button type="button" id="button" class="btn btn-info mt-4">Add Malsaman</button>
        </br>

        <button id="removeButton" class="btn btn-danger mt-4">Remove Form</button>
        <br />
        <br />

        <li class="k-form-buttons">
            <button class="k-button k-button-solid-primary k-button-solid k-button-md k-rounded-md" type="submit">Submit</button>
        </li>
    </form>



    <div id="grid"></div>




    <!-- Add more name, position, date fields as needed -->


    <script>


        $(document).ready(function () {
            $("#mantralaya").kendoDropDownList({
                dataSource: {
                    data: ["", "Kathmandu", "Lalitpur"]
                }

            });

            // $("#karlaya").kendoDropDownList({
            //     dataSource: {
            //         transport: {
            //             read: {
            //                 dataType: "json",
            //                     url: "http://localhost:5000/api/data",

            //             }
            //         }
            //     }
            $("#karlaya").kendoDropDownList({
                dataSource: {
                    data: ["", "402", "403"]
                }

            });

            $("#Arthik_barsa").kendoDropDownList({ dataSource: { data: [2024, 2023, 2022, 2021, 2020, 2019, 2018] } });
            $("#Kharcha_Nikasa_No").kendoNumericTextBox();
            $("#Kharcha_form_number").kendoNumericTextBox();
            $("#datetimepicker").kendoDatePicker({
                dateInput: true,
                startTime: new Date(2023, 1, 3, 8, 30, 0),
                endTime: new Date(2024, 2, 3, 17,00, 0)
            });

        @*THE SUBFORM SECTION*@
                $("#sn").kendoNumericTextBox();
            $("#symbol_no").kendoNumericTextBox();
            $("#specification_no").kendoNumericTextBox();
            $("#akin_no").kendoNumericTextBox();
            $("#quantity").kendoNumericTextBox();
            $("#rate").kendoNumericTextBox();
            $("#Total").kendoTextBox();

            $("#name").kendoTextBox();
            $("#remarks").kendoTextArea({
                rows: 4,
                maxLength: 200,
                placeholder: "Write Remarks..."
            });


            $("#button").click(function () {
                var clonedElement = $("#sub_info").clone();
                clonedElement.appendTo("#sub_main_info");
            });

            $("#removeButton").click(function () {
                event.preventDefault();

                $("#sub_main_info .container").last().remove();
            });



            $("#submit_button").click(function () {
                console.log("clicked");
                var namesArray = $("input.name").map(function () {
                    return $(this).val();
                }).get();
                for (var name of namesArray) {
                    console.log(name);
                }
            });


            var validator = $("#sub_main_info").kendoValidator().data("kendoValidator");
            var validationSummary = $("#sub_main_info", "#sub_info");

            $("form").submit(function (event) {
                event.preventDefault();

                if (validator.validate()) {
                    validationSummary.html("<div class='k-messagebox k-messagebox-success'>Form submitted successfully!</div>");

                    // Additional logic for form submission...

                    // Log form data to the console
                    console.log("Form submitted successfully!");

                    // Log individual field values to the console

                    // Log statements
                    console.log("Mantralaya:", $("#mantralaya").val());
                    console.log("Karlaya:", $("#karlaya").val());
                    console.log("Arthik Barsa:", $("#Arthik_barsa").data("kendoDropDownList").value());
                    console.log("Kharcha Nikasa No:", $("#Kharcha_Nikasa_No").data("kendoNumericTextBox").value());
                    console.log("Kharcha Form Number:", $("#Kharcha_form_number").data("kendoNumericTextBox").value());
                    console.log("Datetime:", $("#datetimepicker").data("kendoDatePicker").value());
                    console.log("sn:", $("#sn").data("kendoNumericTextBox").value());
                    console.log("symbol_no:", $("#symbol_no").data("kendoNumericTextBox").value());
                    console.log("specification_no:", $("#specification_no").data("kendoNumericTextBox").value());
                    console.log("akin_no:", $("#akin_no").data("kendoNumericTextBox").value());
                    console.log("quantity:", $("#quantity").data("kendoNumericTextBox").value());
                    console.log("rate:", $("#rate").data("kendoNumericTextBox").value());
                    console.log("Total:", $("#Total").data("kendoTextBox").value());
                    console.log("name:", $("#name").data("kendoTextBox").value());
                    console.log("remarks:", $("#remarks").data("kendoTextArea").value());
                    var formData = {
                        Mantralaya: $("#mantralaya").val(),
                        Karlaya: $("#karlaya").val(),
                        financialyear: $("#Arthik_barsa").data("kendoDropDownList").value(),

        }
                    // You can similarly log the values of other form fields
                    $.ajax({
                        type: "POST",
                        url: "/Home/SubmitForm", // Update with the correct URL based on your routing configuration
                        data: formData,
                        dataType: "json",
                        success: function (response) {
                            console.log("Form submitted successfully!");
                        },
                        error: function (error) {
                            console.error("Error submitting form:", error);
                        }
                    });

                } else {
                    validationSummary.html("<div class='k-messagebox k-messagebox-error'>Oops! There is invalid data in the form.</div>");
                }
                
            });


            $(document).on('input', '.multiply', function () {
                calculateTotal();
            });

            function calculateTotal() {
                // Get the values of quantity and rate
                var quantityValue = parseFloat($('#quantity').val()) || 0;
                var rateValue = parseFloat($('#rate').val()) || 0;

                // Perform the calculation
                var totalValue = quantityValue * rateValue;

                // Update the Total cell with the result
                $('#Total').val(totalValue.toFixed(2));

                // Update the "8 = 6 * 7" cell
                $('#resultCell').text(totalValue.toFixed(2));
            }

            

        });
    </script>
</body>
</html>
